{"is_source_file": true, "format": "Python", "description": "Pytest configuration and fixtures for backend testing. Provides test fixtures for database connections, FastAPI test client, authentication tokens, and multi-tenant test data setup.", "external_files": ["fastapi.testclient", "sqlalchemy.orm", "unittest.mock", "os", "asyncio", "typing"], "external_methods": ["pytest.fixture", "pytest.yield_fixture"], "published": ["sample_tenant_data", "sample_user_data", "sample_admin_data", "sample_client_data", "sample_project_data", "sample_technology_data", "sample_time_entry_data", "auth_headers", "admin_auth_headers", "different_tenant_headers", "auth_mocker"], "classes": [{"name": "MockApp", "description": "Mock class to simulate a FastAPI app with dependency overrides."}, {"name": "AuthTokenMocker", "description": "Helper class for mocking authentication tokens, providing methods to generate valid, expired, or invalid tokens."}], "methods": [{"name": "event_loop()", "description": "Creates an asyncio event loop for the test session.", "scope": "", "scopeKind": ""}, {"name": "str test_db_url()", "description": "Returns the test database URL, defaulting to a local PostgreSQL URL.", "scope": "", "scopeKind": ""}, {"name": "engine(test_db_url: str)", "description": "Creates and yields a mock database engine for testing.", "scope": "", "scopeKind": ""}, {"name": "Generator[Session,None,None] db_session(engine)", "description": "Creates and yields a database session for tests.", "scope": "", "scopeKind": ""}, {"name": "TestClient client(db_session)", "description": "Creates and returns a mocked FastAPI TestClient with dependency overrides for database session.", "scope": "", "scopeKind": ""}, {"name": "Dict sample_tenant_data()", "description": "Provides sample tenant data for tests.", "scope": "", "scopeKind": ""}, {"name": "Dict sample_user_data()", "description": "Provides sample user data for tests.", "scope": "", "scopeKind": ""}, {"name": "Dict sample_admin_data()", "description": "Provides sample admin user data for tests.", "scope": "", "scopeKind": ""}, {"name": "Dict sample_client_data()", "description": "Provides sample client data for tests.", "scope": "", "scopeKind": ""}, {"name": "Dict sample_project_data()", "description": "Provides sample project data for tests.", "scope": "", "scopeKind": ""}, {"name": "Dict sample_technology_data()", "description": "Provides sample technology data for tests.", "scope": "", "scopeKind": ""}, {"name": "Dict sample_time_entry_data()", "description": "Provides sample time entry data for tests.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] auth_headers()", "description": "Provides mock authentication headers with a token.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] admin_auth_headers()", "description": "Provides mock admin authentication headers.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] different_tenant_headers()", "description": "Provides headers for a different tenant context.", "scope": "", "scopeKind": ""}, {"name": "reset_app_state()", "description": "Fixture to reset application state before each test.", "scope": "", "scopeKind": ""}, {"name": "AuthTokenMocker", "description": "Class for creating mock authentication tokens, including valid, expired, and invalid tokens."}, {"name": "__init__(self)", "scope": "MockApp", "scopeKind": "class", "description": "unavailable"}, {"name": "AuthTokenMocker auth_mocker()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str create_expired_token()", "scope": "AuthTokenMocker", "scopeKind": "class", "description": "unavailable"}, {"name": "str create_invalid_token()", "scope": "AuthTokenMocker", "scopeKind": "class", "description": "unavailable"}, {"name": "str create_valid_token(user_id: str, tenant_id: str, role: str = \"user\")", "scope": "AuthTokenMocker", "scopeKind": "class", "description": "unavailable"}], "calls": ["asyncio.get_event_loop_policy().new_event_loop()"], "search-terms": ["pytest fixtures", "FastAPI test client", "mock database engine", "test data fixtures", "authentication headers", "mock tokens", "conftest.py", "multitenant testing"], "state": 2, "file_id": 6, "knowledge_revision": 20, "git_revision": "", "revision_history": [{"13": ""}, {"20": ""}], "ctags": [{"_type": "tag", "name": "AuthTokenMocker", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^class AuthTokenMocker:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MockApp", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^class MockApp:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "MockApp", "scopeKind": "class"}, {"_type": "tag", "name": "admin_auth_headers", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def admin_auth_headers() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^app = MockApp()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "auth_headers", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def auth_headers() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "auth_mocker", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def auth_mocker() -> AuthTokenMocker:$/", "language": "Python", "typeref": "typename:AuthTokenMocker", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def client(db_session) -> TestClient:$/", "language": "Python", "typeref": "typename:TestClient", "kind": "function", "signature": "(db_session)"}, {"_type": "tag", "name": "create_expired_token", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^    def create_expired_token() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "()", "scope": "AuthTokenMocker", "scopeKind": "class"}, {"_type": "tag", "name": "create_invalid_token", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^    def create_invalid_token() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "()", "scope": "AuthTokenMocker", "scopeKind": "class"}, {"_type": "tag", "name": "create_valid_token", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^    def create_valid_token(user_id: str, tenant_id: str, role: str = \"user\") -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(user_id: str, tenant_id: str, role: str = \"user\")", "scope": "AuthTokenMocker", "scopeKind": "class"}, {"_type": "tag", "name": "db_session", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def db_session(engine) -> Generator[Session, None, None]:$/", "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "(engine)"}, {"_type": "tag", "name": "different_tenant_headers", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def different_tenant_headers() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def engine(test_db_url: str):$/", "language": "Python", "kind": "function", "signature": "(test_db_url: str)"}, {"_type": "tag", "name": "event_loop", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def event_loop():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "reset_app_state", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def reset_app_state():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sample_admin_data", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def sample_admin_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sample_client_data", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def sample_client_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sample_project_data", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def sample_project_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sample_technology_data", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def sample_technology_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sample_tenant_data", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def sample_tenant_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sample_time_entry_data", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def sample_time_entry_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sample_user_data", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def sample_user_data() -> Dict:$/", "language": "Python", "typeref": "typename:Dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_db_url", "path": "/home/kavia/workspace/code-generation/multitenant-time-tracker-94699-61449/backend/src/tests/conftest.py", "pattern": "/^def test_db_url() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}], "hash": "8c9bae6725cb94bfccf126b281ce9397", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/tests/conftest.py", "fields": [{"name": "app = MockApp()", "scope": "", "scopeKind": "", "description": "unavailable"}]}